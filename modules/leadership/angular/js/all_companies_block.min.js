var all_companies_block=angular.module("all_companies_block",[]);all_companies_block.controller("AllCompaniesBlockTermListCtrl",["$scope","$http","$attrs",function(a,b,c){a.taxonomies={},a.taxonomies.companies={},a.site=c.site,Drupal.settings.hasOwnProperty("leadership_all_companies_block")&&Drupal.settings.leadership_all_companies_block&&(a.taxonomies=Drupal.settings.leadership_all_companies_block),a.categoryOpen=function(b){null==b.show&&a.getCompanies(b),b.show=!b.show},a.getCompanies=function(a){var c="/leaders/get-company-list/json/"+a.tid+"/1";b({method:"GET",url:c}).success(function(b){a.companies=b,Drupal.settings.hasOwnProperty("waywire_leadership")||(Drupal.settings.waywire_leadership={}),Drupal.settings.hasOwnProperty("leadershipDatacard")||(Drupal.settings.leadershipDatacard={}),Drupal.settings.leadershipDatacard.hasOwnProperty(a.tid)||(Drupal.settings.leadershipDatacard[a.tid]=b)})}}]),all_companies_block.animation(".slideDown",function(){return{addClass:function(a,b,c){jQuery(a).slideDown(c)},removeClass:function(a,b,c){jQuery(a).slideUp(c)}}}),all_companies_block.directive("companyList",function(){return{restrict:"E",replace:!0,template:'<li ng-repeat="company in taxonomy.companies" leadership-link><a class="all-companies-block-text company-name leadership-link" href="{{company.alias}}">{{company.title}}</a><span class="youtube-amplified" ng-show="company.field_youtube_amplified_value == 1"><span class="circle"><span class="triangle"></span></span></span><compile-data-card tid="{{company.tid}}" nid="{{company.datacard_nid}}" site="{{site}}" hover-state="hoverState"></compile-data-card></li>'}}),all_companies_block.directive("taxonomyList",["$timeout",function(){return{restrict:"E",link:function(a,b){a.$watch(function(){return a.taxonomy.show},function(c){var d=b.find(".leadership-menu");if(c){if(d.hasClass("slideDown")&&d.hasClass("hide")){d.removeClass("hide"),d.addClass("invisible"),d.css({"max-height":""});var e=d.height(),f=setInterval(function(){var a=d.height();0!=e&&a==e?(clearInterval(f),d.css("max-height",e),d.removeClass("invisible"),d.addClass("hide"),d.slideDown("fast",function(){d.removeClass("hide")})):e=a},15)}}else c||null==c||void 0==c||a.taxonomy.companies&&d.hasClass("slideUp")&&d.slideUp("slow",function(){d.addClass("hide")})})},template:'<div class="taxonomy-tid-{{taxonomy.tid}} taxonomy-tid"><span class="brackets" ng-click="categoryOpen(taxonomy)">[<span class="plus-minus"><span ng-show="!taxonomy.show">+</span><span ng-show="taxonomy.show">â€“</span></span>]</span>&nbsp;<span class="taxonomy-name all-companies-block-text" ng-click="categoryOpen(taxonomy)">{{taxonomy.name}}</span><ul class="company-list leadership-menu hide" ng-class="{slideDown: taxonomy.show, slideUp: !taxonomy.show}"><company-list></company-list></ul></div>'}}]),window.smgAngularDependencies.push("all_companies_block");