function isIE() {
    var a = navigator.userAgent.toLowerCase();
    return -1 != a.indexOf("msie") ? parseInt(a.split("msie")[1]) : !1;
}

var videoWidget = angular.module("videoWidget", [ "videoWidgetConfig", "ngTouch" ]);

videoWidget.run(function() {}), videoWidget.controller("VideoListCtrl", [ "$scope", "getConfig", "$attrs", "$http", "$element", "$window", function(a, b, c, d) {
    a.nid = c.nid, a.isDataCard = c.hasOwnProperty("datacard") && c.datacard, a.tid = c.hasOwnProperty("tid") ? c.tid : !1, 
    a.videos = {};
    var e = !1;
    if (!a.isDataCard && Drupal.settings.hasOwnProperty("waywire_leadership") ? Drupal.settings.waywire_leadership.hasOwnProperty(a.nid) && (e = Drupal.settings.waywire_leadership[a.nid]) : a.isDataCard && a.tid && Drupal.settings.hasOwnProperty("leadershipDatacard") && Drupal.settings.leadershipDatacard.hasOwnProperty(a.tid) && Drupal.settings.leadershipDatacard[a.tid].hasOwnProperty(a.nid) && (e = Drupal.settings.leadershipDatacard[a.tid][a.nid].waywire_videos[a.nid]), 
    e && (a.page = e.page, a.pageCount = e.page_count, a.totalCount = e.total_count, 
    a.companyName = e.companyName, a.videos = e.videos), a.config = b, a.currentCount = 1, 
    a.videoWidgetParams = {
        videosToShow: a.isDataCard ? 3 : a.config.videosToShow,
        oldVideosToShow: a.isDataCard ? 3 : a.config.videosToShow
    }, a.updateVideosToShow = function(b) {
        a.videoWidgetParams.oldVideosToShow = a.videoWidgetParams.videosToShow, a.videoWidgetParams.videosToShow = b, 
        a.normalizeCount();
    }, a.videoBlockCount = function() {
        return Math.ceil(a.videos.length / a.videoWidgetParams.videosToShow);
    }, a.isLastVideoBlock = !1, a.sizeOfObj = function(a) {
        var b, c = 0;
        for (b in a) a.hasOwnProperty(b) && c++;
        return c;
    }, a.isLastVideoBlockCalculate = function() {
        return a.videoBlockCount() - a.currentCount === 0 && !(a.sizeOfObj(a.videos) < a.totalCount);
    }, a.videosNext = function() {
        var b = a.videoBlockCount();
        if (a.currentCount < b) {
            if (b - a.currentCount === 1) if (a.sizeOfObj(a.videos) < a.totalCount) {
                var c = a.isDataCard ? "datacard" : "node", e = "/waywire_leadership/get/json/" + a.nid + "/" + c + "/" + ++a.page;
                d({
                    method: "GET",
                    url: e
                }).success(function(b) {
                    for (i = 0; i < b.videos.length; i++) a.videos.push(b.videos[i]);
                });
            } else a.isLastVideoBlock = !0;
            a.currentCount++;
        }
    }, a.videosPrev = function() {
        a.currentCount > 1 && (a.currentCount--, a.isLastVideoBlock = !1);
    }, a.draw = function() {
        var b = (a.currentCount - 1) * a.videoWidgetParams.videosToShow, c = a.currentCount * a.videoWidgetParams.videosToShow;
        a.isLastVideoBlock = a.isLastVideoBlockCalculate(), a.extraCssClasses.lastVideoBlock = a.isLastVideoBlock, 
        a.videos.forEach(function(a, d) {
            d >= b && c > d ? (a.visible = !0, a.videoCss = c - d == 1 ? {
                noHide: !0,
                lastNoHide: !0
            } : {
                noHide: !0,
                lastNoHide: !1
            }) : (a.visible = !1, a.videoCss = b > d ? "hideLeft" : "hideRight");
        });
    }, a.normalizeCount = function() {
        var b = a.currentCount * a.videoWidgetParams.oldVideosToShow - (a.videoWidgetParams.oldVideosToShow - 1), c = a.videoWidgetParams.videosToShow;
        a.currentCount = c > b ? 1 : b % c ? Math.floor(b / c) + 1 : b / c;
    }, a.responsiveCssClasses = {
        full: !0,
        twoVideo: !1,
        oneVideo: !1,
        max480: !1
    }, a.config.hasOwnProperty("extraResponsiveClasses") && !a.isDataCard) for (var f in a.config.extraResponsiveClasses) a.responsiveCssClasses[f] = a.config.extraResponsiveClasses[f];
    a.extraCssClasses = void 0 !== a.config.extraCssClasses ? angular.copy(a.config.extraCssClasses) : {}, 
    a.mergeCssClassesObjs = function() {
        for (var b in a.responsiveCssClasses) a.extraCssClasses[b] = a.responsiveCssClasses[b];
    }, a.mergeCssClassesObjs();
} ]), videoWidget.directive("videoWidget", [ "$window", "$timeout", function(a, b) {
    var c = Drupal.settings.smgAngularTemplates.videoWidget;
    return {
        restrict: "E",
        replace: !0,
        scope: !0,
        controller: "VideoListCtrl",
        link: function(a, c, d) {
            d.$observe("nid", function(b) {
                a.nid = b;
            }), jQuery(function() {}), b(function() {
                c.find(".videoWidget-count-selector").each(function(a, b) {
                    new FastClick(b);
                });
            }, 100);
        },
        templateUrl: c
    };
} ]), videoWidget.directive("videoSlider", function() {
    var a = Drupal.settings.smgAngularTemplates.video;
    return {
        restrict: "AE",
        replace: !0,
        scope: !0,
        link: function(a) {
            a.$watch("currentCount", function() {
                a.draw();
            });
        },
        templateUrl: a
    };
}), videoWidget.directive("resizable", [ "$window", "getConfig", function(a, b) {
    return {
        restrict: "AE",
        scope: !0,
        link: function(c) {
            var d = angular.element(a);
            c.getWindowDimensions = function() {
                return {
                    w: d.width(),
                    h: d.height()
                };
            }, c.$watch(c.getWindowDimensions, function(a) {
                var d = function(a, b) {
                    c.responsiveCssClasses[b] || (c.updateVideosToShow(a), e(b), c.draw());
                }, e = function(a) {
                    if (!c.responsiveCssClasses[a]) {
                        for (var b in c.responsiveCssClasses) c.responsiveCssClasses.hasOwnProperty(b) && (c.responsiveCssClasses[b] = b == a ? !0 : !1);
                        c.mergeCssClassesObjs();
                    }
                };
                videosToShowMap = b.videosToShowMapping(a), c.isDataCard || d(videosToShowMap.mappingVideos, videosToShowMap.mappingClass);
            }, !0), d.bind("resize", function() {
                c.$apply();
            });
        }
    };
} ]), videoWidget.directive("smgLightbox", [ "$timeout", function(a) {
    return {
        restrict: "A",
        scope: !0,
        link: function(b, c) {
            a(function() {
                createLinkPlayer(c[0]);
            }, 0);
            var d = c.parents(".videoWidget-video");
            d.on("click", function() {
                c[0].click();
            });
        }
    };
} ]), videoWidget.directive("videoContainerStyle", [ "$window", "$timeout", function(a) {
    return {
        require: "videoContainerStyle",
        restrict: "A",
        scope: !0,
        controller: [ "$scope", "$element", function(b, c) {
            this.changeVideoContainerHeight = function() {
                {
                    var d = c, e = jQuery(a), f = function() {
                        var a = navigator.userAgent.toLowerCase();
                        return -1 != a.indexOf("msie") ? parseInt(a.split("msie")[1]) : !1;
                    }, f = f();
                    f && jQuery.inArray(f, [ "6", "7", "8" ]);
                }
                if (e.innerWidth() > 480 || f) {
                    var g = b.videoWidgetParams.videosToShow, h = c.parents(".videoWidget-wrapper").width(), i = .8;
                    if ("none" != c.css("max-width")) {
                        var j = c.css("max-width");
                        j.search("%") > -1 && (i = parseFloat(j) / 100);
                    }
                    var k = i * h;
                    if (k % g != 0) {
                        var l = Math.floor(k / g) * g;
                        c.css({
                            width: l + "px"
                        });
                    }
                    c.css({
                        height: ""
                    });
                } else {
                    var m = 0;
                    d.find(".videoWidget-video.noHide").each(function(a, b) {
                        m += jQuery(b).outerHeight(!0);
                    }), m -= 2 * parseInt(d.find(".videoWidget-video.lastNoHide").css("margin-bottom")), 
                    c.css({
                        height: m + "px"
                    }), c.css({
                        width: ""
                    });
                }
            };
        } ],
        link: function(b, c, d, e) {
            b.$watch(b.getWindowDimensions(), function() {
                e.changeVideoContainerHeight();
            }), angular.element(a).bind("resize", function() {
                e.changeVideoContainerHeight();
            }), b.$on("leadershipHoverBegin", function() {
                e.changeVideoContainerHeight(), b.$broadcast("videoContainerVisible");
            });
        }
    };
} ]), videoWidget.directive("videoStyle", [ "$window", "$timeout", function(a, b) {
    return {
        restrict: "A",
        require: "^videoContainerStyle",
        scope: !0,
        link: function(c, d, e, f) {
            c.changeVideoStyles = function() {
                if (a.innerWidth < 480) {
                    var e = d.siblings().first().height();
                    d.siblings().height(e + "px"), d.css("margin-left", ""), c.$first && b(function() {
                        d.css("width", ""), d.siblings().css("width", "");
                    }, 200), c.$last && (b(f.changeVideoContainerHeight, 1e3), b(f.changeVideoContainerHeight, 4e3)), 
                    c.$first && c.currentCount > 1 && b(function() {
                        var a = parseInt(d.css("margin-bottom"));
                        newMargin = -1 * (c.currentCount - 1) * (d.outerHeight() * c.videoWidgetParams.videosToShow + a * c.videoWidgetParams.videosToShow), 
                        newMargin += a, d.css({
                            "margin-top": newMargin + "px"
                        });
                    }, 300);
                } else {
                    if (0 === c.$index) {
                        b(function() {
                            var a = d.parents(".videoWidget-videos"), b = Math.floor(a.width() / c.videoWidgetParams.videosToShow);
                            d.css({
                                width: b
                            }), d.siblings(".videoWidget-video").css({
                                width: b
                            });
                        }, 100);
                        var g = -100 * (c.currentCount - 1);
                        d.css({
                            "margin-left": g + "%"
                        });
                    }
                    d.css({
                        height: ""
                    });
                }
            }, c.$watch("currentCount", function() {
                c.changeVideoStyles();
            }), angular.element(a).bind("resize", function() {
                d.is(":visible") && c.changeVideoStyles();
            }), c.$on("videoContainerVisible", function() {
                d.css({
                    transition: "none"
                }), c.changeVideoStyles(), b(function() {
                    d.css({
                        transition: ""
                    });
                }, 100);
            });
        }
    };
} ]), window.smgAngularDependencies.push("videoWidget");