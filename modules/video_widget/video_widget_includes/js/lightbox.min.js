function f_clientWidth(){return f_filterResults(window.innerWidth?window.innerWidth:0,document.documentElement?document.documentElement.clientWidth:0,document.body?document.body.clientWidth:0)}function f_clientHeight(){return f_filterResults(window.innerHeight?window.innerHeight:0,document.documentElement?document.documentElement.clientHeight:0,document.body?document.body.clientHeight:0)}function f_scrollLeft(){return f_filterResults(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.scrollLeft:0,document.body?document.body.scrollLeft:0)}function f_scrollTop(){return f_filterResults(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)}function f_filterResults(a,b,c){var d=a?a:0;return b&&(!d||d>b)&&(d=b),c&&(!d||d>c)?c:d}function magnifyLightbox(){}function magnifyPlayer(){}function f_clientWidth(){return f_filterResults(window.innerWidth?window.innerWidth:0,document.documentElement?document.documentElement.clientWidth:0,document.body?document.body.clientWidth:0)}function f_clientHeight(){return f_filterResults(window.innerHeight?window.innerHeight:0,document.documentElement?document.documentElement.clientHeight:0,document.body?document.body.clientHeight:0)}function f_scrollLeft(){return f_filterResults(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.scrollLeft:0,document.body?document.body.scrollLeft:0)}function f_scrollTop(){return f_filterResults(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)}function f_filterResults(a,b,c){var d=a?a:0;return b&&(!d||d>b)&&(d=b),c&&(!d||d>c)?c:d}function magnifyLightbox(){}function magnifyPlayer(){}var magnifyLightboxScripts=document.getElementsByTagName("script"),magnifyLightboxDetect=navigator.userAgent.toLowerCase(),magnifyLightboxOS,magnifyLightboxBrowser,magnifyLightboxBrowserVersion;window.domScanned=!1,"undefined"==typeof window.magnifyLightboxes&&(window.magnifyLightboxes=new Array),"undefined"==typeof window.magnifyPlayers&&(window.magnifyPlayers=new Array),"undefined"==typeof window.magnifyLightboxLinks&&(window.magnifyLightboxLinks=new Array);var debugLog="",debuggerLoaded=!1;logDebug=function(a){return},attachDebugger=function(){var a=document.getElementById("magnifyLightboxDebugger");if(!a){var b=document.createElement("div");b.style.overflow="auto",b.style.width="400px",b.style.height="200px",b.id="magnifyLightboxDebugger",debugLog&&(b.innerHTML=debugLog),document.body.appendChild(b),debuggerLoaded=!0}};var getElementsByClassName=function(a,b,c){return(getElementsByClassName=document.getElementsByClassName?function(a,b,c){c=c||document;for(var d,e=c.getElementsByClassName(a),f=b?new RegExp("\\b"+b+"\\b","i"):null,g=[],h=0,i=e.length;i>h;h+=1)d=e[h],(!f||f.test(d.nodeName))&&g.push(d);return g}:document.evaluate?function(a,b,c){b=b||"*",c=c||document;for(var d,e,f=a.split(" "),g="",h="http://www.w3.org/1999/xhtml",i=document.documentElement.namespaceURI===h?h:null,j=[],k=0,l=f.length;l>k;k+=1)g+="[contains(concat(' ', @class, ' '), ' "+f[k]+" ')]";try{d=document.evaluate(".//"+b+g,c,i,0,null)}catch(m){d=document.evaluate(".//"+b+g,c,null,0,null)}for(;e=d.iterateNext();)j.push(e);return j}:function(a,b,c){b=b||"*",c=c||document;for(var d,e,f=a.split(" "),g=[],h="*"===b&&c.all?c.all:c.getElementsByTagName(b),i=[],j=0,k=f.length;k>j;j+=1)g.push(new RegExp("(^|\\s)"+f[j]+"(\\s|$)"));for(var l=0,m=h.length;m>l;l+=1){d=h[l],e=!1;for(var n=0,o=g.length;o>n&&(e=g[n].test(d.className),e);n+=1);e&&i.push(d)}return i})(a,b,c)};getMagnifyLightboxBrowserInfo=function(){checkMagnifyLightbox("konqueror")?(magnifyLightboxBrowser="Konqueror",magnifyLightboxOS="Linux"):checkMagnifyLightbox("safari")?magnifyLightboxBrowser="Safari":checkMagnifyLightbox("omniweb")?magnifyLightboxBrowser="OmniWeb":checkMagnifyLightbox("opera")?magnifyLightboxBrowser="Opera":checkMagnifyLightbox("webtv")?magnifyLightboxBrowser="WebTV":checkMagnifyLightbox("icab")?magnifyLightboxBrowser="iCab":checkMagnifyLightbox("msie")?magnifyLightboxBrowser="Internet Explorer":checkMagnifyLightbox("compatible")?magnifyLightboxBrowser="An unknown browser":(magnifyLightboxBrowser="Netscape Navigator",magnifyLightboxBrowserVersion=magnifyLightboxDetect.charAt(8)),magnifyLightboxBrowserVersion||(magnifyLightboxBrowserVersion=magnifyLightboxDetect.charAt(place+magnifyfLightboxString.length)),magnifyLightboxOS||(magnifyLightboxOS=checkMagnifyLightbox("linux")?"Linux":checkMagnifyLightbox("x11")?"Unix":checkMagnifyLightbox("mac")?"Mac":checkMagnifyLightbox("win")?"Windows":"an unknown operating system"),logDebug("got browser info, going to get magnify variables"),getMagnifyVariables(),window.domScanned||(window.addEventListener?window.addEventListener("load",function(){scanForLinks()},!1):window.attachEvent&&window.attachEvent("onload",function(){scanForLinks()}))},scanForLinks=function(){if(!window.domScanned){window.magnifyLightboxLinks=getElementsByClassName("magnify-lightbox","a"),window.domScanned=!0;for(var a=0;a<window.magnifyLightboxLinks.length;a++){var b=window.magnifyLightboxLinks[a];createLinkPlayer(b)}}},createLinkPlayer=function(a){try{magnifyLightboxWindow=window.top;var b=new magnifyPlayer,c=document.createElement("a");c.href=a.href;for(var d=new Array,e=c.search?c.search.slice(1,c.search.length):"",f=e?e.split("&"):new Array,g=!1,h=0;h<f.length;h++){var i=f[h].split("=");"init_autoplay"==d[0]&&(g=!0),d.push(i[0],i[1])}g||d.push("init_autoplay","1");var j=d.join("/");if(logDebug(j),b.hostname=c.hostname,b.pathname=c.pathname,b.pathname.match(/^\//)||(b.pathname="/"+b.pathname),b.channel="5TKQP712FQK6LLQ4",b.url="http://"+b.hostname+b.pathname+"/player/svp/layout/lightbox/"+j,logDebug("player url: "+b.url),b.count=magnifyPlayers.length,logDebug("adding player "+b.count+" "+a.href),b.url+="/player_count/"+b.count,b.info=b.createPlayer(),magnifyPlayers.push(b),!document.getElementById("magnify_lightbox_overlay")){var k=magnifyLightboxWindow.document.getElementsByTagName("body")[0],l=k.childNodes,m=magnifyLightboxWindow.document.createElement("div");m.id="magnify_lightbox_overlay",m.style.display="none",m.style.top="0px",m.style.left="0px",m.style.width="100%",m.style.height="100%",m.style.zIndex=5e3,m.style.textAlign="center",m.style.position="Internet Explorer"==magnifyLightboxBrowser?"absolute":"fixed",m.style.backgroundImage="url('http://decor.waywire.com/decor/live/lightbox.png')",l.length>0?k.insertBefore(m,l[0]):k.appendChild(m)}magnifyLightboxes.push(new magnifyLightbox),a.addEventListener?(a.addEventListener("click",function(a){return populateMagnifyLightbox(a,b.count)},!1),logDebug("adding overlay event listener")):a.attachEvent?(logDebug("attaching overlay event"),a.attachEvent("onclick",function(a){return populateMagnifyLightbox(a,b.count)})):(logDebug("falling through to default overlay onclick"),a.onclick=function(a){return populateMagnifyLightbox(a,b.count)}),window.addEventListener?window.addEventListener("message",receiveMessage,!1):window.attachEvent&&window.attachEvent("onmessage",receiveMessage)}catch(n){logDebug("Could not create lightbox link: "+n.message)}},checkMagnifyLightbox=function(a){return place=magnifyLightboxDetect.indexOf(a)+1,magnifyfLightboxString=a,place},getMagnifyVariables=function(){return},mvpInjectScript=function(a,b,c,d){var e=document.getElementsByTagName("head")[0],f=document.getElementById(b);if(f&&e.removeChild(f),f=null,f&&a==f.src)d();else{var g=document.createElement("script");g.setAttribute("src",a),g.setAttribute("id",b),d&&mvpWaitForLoad(c,d),e.appendChild(g)}},mvpWaitForLoad=function(lookFor,callback){var interval=setInterval(function(){"undefined"!=eval("typeof "+lookFor)&&(clearInterval(interval),callback())},50)},magnifyLightbox.prototype={yPos:0,xPos:0,activate:function(){"Internet Explorer"==magnifyLightboxBrowser&&(this.getScroll(),this.prepareIE("100%","hidden"),this.setScroll(0,0)),this.hideSelects("hidden"),this.displayLightbox("block")},prepareIE:function(a,b){bod=document.getElementsByTagName("body")[0],bod.style.height=a,bod.style.overflow=b,htm=document.getElementsByTagName("html")[0],htm.style.height=a,htm.style.overflow=b},hideSelects:function(a){var b=document.getElementsByTagName("select");for(i=0;i<b.length;i++)b[i].style.visibility=a;var c=document.getElementsByTagName("object");for(i=0;i<c.length;i++)c[i].style.visibility=a;var d=document.getElementsByTagName("embed");for(i=0;i<d.length;i++)d[i].style.visibility=a},makeOpaque:function(a){var b=document.getElementsByTagName("head")[0],c=document.getElementById("removeOpacity");if(a){var d=document.createElement("style");d.id="removeOpacity";var e="html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {opacity:1.0; filter:alpha(opacity=100)}";if(d.setAttribute("type","text/css"),d.styleSheet)d.styleSheet.cssText=e;else{var f=document.createTextNode(e);d.appendChild(f)}b.appendChild(d)}else c&&b.removeChild(c)},getScroll:function(){self.pageYOffset?this.yPos=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?this.yPos=document.documentElement.scrollTop:document.body&&(this.yPos=document.body.scrollTop)},setScroll:function(a,b){window.scrollTo(a,b)},displayLightbox:function(a){document.getElementById("magnify_lightbox_overlay").style.display=a},deactivate:function(){var a=document.getElementById("magnify_lightbox_overlay"),b=document.getElementById("magnify_lightbox_content");return b&&a.removeChild(b),a.innerHTML="","Internet Explorer"==magnifyLightboxBrowser&&(this.prepareIE("auto","auto"),this.setScroll(0,this.yPos)),this.hideSelects("visible"),this.makeOpaque(!1),this.displayLightbox("none"),!1}},populateMagnifyLightbox=function(a,b){try{var c=magnifyPlayers[b],d=magnifyLightboxes[b],e=c.info,f=document.getElementById("magnify_lightbox_overlay");f.appendChild(e),f.onclick=function(){d.deactivate()};var g=document.getElementById("magnify_lightbox_close_"+b);g.onclick=function(){return d.deactivate()},d.activate(),stopEvent(a)}catch(a){logDebug("can't spawn lightbox: "+a.message)}},stopEvent=function(a){if(!a)var a=window.event;return a.cancelBubble=!0,a.returnValue=!1,a.stopPropagation&&(a.stopPropagation(),a.preventDefault()),!1},receiveMessage=function(a){var b=a.data.split(":"),c=b[0],d=b[1],e=magnifyPlayers[c];if(c&&d&&e){logDebug("Received message: count: "+c+" data: "+d+" player: "+e);var f=magnifyLightboxScripts[magnifyLightboxScripts.length-1],g=document.createElement("a");g.href=f.src;var h=e.hostname||g.hostname;a.origin==="http://"+h&&d.match("resize")&&(logDebug("resizing player"),resizeOverlay(d.split(" ")[1]))}},resizeOverlay=function(a){try{var b=a.split("x"),c=document.getElementById("magnify_lightbox_content"),d=[parseInt(c.style.width),parseInt(c.style.height)];logDebug("current player height: "+d[0]+" current player width: "+d[1]),c.style.width=b[0]+"px",c.style.height=b[1]+"px",c=document.getElementById("magnify_player_iframe_container"),c.style.width=b[0]+"px",c.style.height=b[1]+"px",logDebug("new player height: "+c.style.height+" new player width: "+c.style.width)}catch(e){logDebug("Error in resize overlay: "+e.message)}},magnifyPlayer.prototype={addMagnifyLightboxMarkup:function(){if(!this.cid||!this.img||!this.channel)return void logDebug("cid: "+cid+" img: "+img+" channel: "+channel);logDebug("adding markup");try{var a=magnifyLightboxWindow.document.getElementsByTagName("body")[0],b=a.childNodes;if(!document.getElementById("magnify_lightbox_overlay")){var c=magnifyLightboxWindow.document.createElement("div");c.id="magnify_lightbox_overlay",c.style.display="none",c.style.top="0px",c.style.left="0px",c.style.width="100%",c.style.height="100%",c.style.zIndex=5e3,c.style.textAlign="center",c.style.position="Internet Explorer"==magnifyLightboxBrowser?"absolute":"fixed",c.style.backgroundImage="url('http://decor.waywire.com/decor/live/lightbox.png')",b.length>0?a.insertBefore(c,b[0]):a.appendChild(c)}this.count=magnifyPlayers.length,this.url+="/player_count/"+this.count,this.info=this.createPlayer(),magnifyPlayers.push(this),magnifyLightboxes.push(new magnifyLightbox),logDebug("about to build lightbox"),this.buildMagnifyLightbox()}catch(d){logDebug(d.message)}},createPlayer:function(){var a=parseInt(f_clientWidth()),b=parseInt(f_clientHeight()),c=this.getPlayerWidth(a),d=Math.floor(.5625*c)+200,e=Math.floor((b-d)/2)>0?Math.floor((b-d)/2):10,f=document.createElement("style"),g="";if(f.setAttribute("type","text/css"),f.styleSheet)f.styleSheet.cssText=g;else{var h=document.createTextNode(g);f.appendChild(h)}var i=document.createElement("div");i.className="magnify-player-lightbox-content",i.id="magnify_lightbox_content",i.style.position="relative",i.style.width=c+"px",i.style.height=d+"px",i.style.marginTop=e+"px",i.style.marginLeft="auto",i.style.marginRight="auto",i.style.textAlign="left";var j=document.createElement("div");j.className="magnify-player-close clearfix",j.style.textAlign="right",j.style.position="absolute",j.style.width="100%",j.style.zIndex=2;var k=document.createElement("a");k.href="#",k.className="magnify-player-close-link",k.id="magnify_lightbox_close_"+this.count,k.style.position="relative";var l=document.createElement("img");l.src="http://www.waywire.com/decor/live/lightbox_close.png",l.border="0",l.style.position="relative",l.style.top="-15px",l.style.right="-15px";var m=document.createElement("div");m.style.position="relative",m.style.height=d+"px",m.style.width=c+"px",m.id="magnify_player_iframe_container";var n=document.createElement("iframe");return n.id="magnify_lightbox_frame_"+this.count,n.src=this.url,n.style.width="100%",n.style.height="100%",n.frameBorder="0",n.marginHeight="0",n.marginWidth="0",n.scrolling="no",n.setAttribute("allowTransparency",!0),k.appendChild(l),j.appendChild(k),m.appendChild(n),i.appendChild(f),i.appendChild(j),i.appendChild(m),i},insertMagnifyLightboxCSS:function(a){var b=document.createElement("style"),c=a;if(b.setAttribute("type","text/css"),b.styleSheet)b.styleSheet.cssText=c;else{var d=document.createTextNode(c);b.appendChild(d)}var e=document.getElementsByTagName("head")[0];e.appendChild(b)},getPlayerWidth:function(a){return 750>a?600:736},buildMagnifyLightbox:function(){return logDebug("starting to build lightbox"),this.cid&&this.img&&this.channel?void this.buildMagnifyBug():(logDebug("missing something, aborting"),void logDebug("cid: "+cid+" img: "+img+" channel: "+channel))},buildMagnifyBug:function(){logDebug("building magnify bug");try{var a=this,b=document.createElement("div");if(b.id="magnify_lightbox_player_overlay_container_"+this.count,b.className="magnify-lightbox-overlay-container",this.showOverlay){var c=document.createElement("div");c.id="magnify_lightbox_player_overlay_"+this.count,c.className="magnify-lightbox-overlay",c.style.backgroundImage="url(http://static.media.magnify.net.s3.amazonaws.com/img/player_overlay.png)",c.style.backgroundPosition="center center",c.style.backgroundRepeat="no-repeat",c.style.cursor="pointer",c.style.cursor="hand",c.style.position="absolute",c.style.left="0px",c.style.width=this.imgWidth+"px",c.style.height=this.imgHeight+"px";var d=document.createElement("img");d.src="http://decor.waywire.com/decor/live/transparent.gif",d.width=this.imgWidth,d.height=this.imgHeight,c.appendChild(d),b.appendChild(c),c.addEventListener?(c.addEventListener("click",function(b){return populateMagnifyLightbox(b,a.count)},!1),logDebug("adding overlay event listener")):c.attachEvent?(logDebug("attaching overlay event"),c.attachEvent("onclick",function(b){return populateMagnifyLightbox(b,a.count)})):(logDebug("falling through to default overlay onclick"),c.onclick=function(b){return populateMagnifyLightbox(b,a.count)})}var e=document.createElement("div");e.id="magnify_lightbox_player_thumbnail_container_"+this.count,e.className="magnify-lightbox-thumbnail-container",e.style.cursor="pointer",e.style.cursor="hand";var f=document.createElement("img");if(f.className="magnify-lightbox-thumbnail",f.src=this.img,f.width=this.imgWidth,f.height=this.imgHeight,e.appendChild(f),b.appendChild(e),this.showOverlay||(e.addEventListener?(logDebug("adding thumbnail event listener"),e.addEventListener("click",function(b){return populateMagnifyLightbox(b,a.count)},!1)):e.attachEvent?(logDebug("attaching thumbnail event"),e.attachEvent("onclick",function(b){return populateMagnifyLightbox(b,a.count)})):(logDebug("falling through to default onclick"),e.onclick=function(b){return populateMagnifyLightbox(b,a.count)})),logDebug("events come after DOM attachment"),this.title){var g=document.createElement("div");g.className="magnify-lightbox-player-title",g.innerHTML=this.title,b.appendChild(g)}if(this.description){var h=document.createElement("div");h.className="magnify-lightbox-player-description",h.innerHTML=this.description,b.appendChild(h)}var i=document.createElement("div");i.id="magnify_lightbox_player_"+this.count,i.className="magnify-lightbox-player",i.style.position="relative",i.appendChild(b),this.bug=i,this.insertMagnifyLightbox()}catch(j){logDebug(j.message)}},insertMagnifyLightbox:function(){logDebug("inserting bug before "+this.script.src),this.script.parentNode.insertBefore(this.bug,this.script)}},getMagnifyLightboxBrowserInfo();var magnifyLightboxScripts=document.getElementsByTagName("script"),magnifyLightboxDetect=navigator.userAgent.toLowerCase(),magnifyLightboxOS,magnifyLightboxBrowser,magnifyLightboxBrowserVersion;window.domScanned=!1,"undefined"==typeof window.magnifyLightboxes&&(window.magnifyLightboxes=new Array),"undefined"==typeof window.magnifyPlayers&&(window.magnifyPlayers=new Array),"undefined"==typeof window.magnifyLightboxLinks&&(window.magnifyLightboxLinks=new Array);var debugLog="",debuggerLoaded=!1;logDebug=function(){},attachDebugger=function(){var a=document.getElementById("magnifyLightboxDebugger");if(!a){var b=document.createElement("div");b.style.overflow="auto",b.style.width="400px",b.style.height="200px",b.id="magnifyLightboxDebugger",debugLog&&(b.innerHTML=debugLog),document.body.appendChild(b),debuggerLoaded=!0}};var getElementsByClassName=function(a,b,c){return(getElementsByClassName=document.getElementsByClassName?function(a,b,c){c=c||document;for(var d,e=c.getElementsByClassName(a),f=b?new RegExp("\\b"+b+"\\b","i"):null,g=[],h=0,i=e.length;i>h;h+=1)d=e[h],(!f||f.test(d.nodeName))&&g.push(d);return g}:document.evaluate?function(a,b,c){b=b||"*",c=c||document;for(var d,e,f=a.split(" "),g="",h="http://www.w3.org/1999/xhtml",i=document.documentElement.namespaceURI===h?h:null,j=[],k=0,l=f.length;l>k;k+=1)g+="[contains(concat(' ', @class, ' '), ' "+f[k]+" ')]";try{d=document.evaluate(".//"+b+g,c,i,0,null)}catch(m){d=document.evaluate(".//"+b+g,c,null,0,null)}for(;e=d.iterateNext();)j.push(e);return j}:function(a,b,c){b=b||"*",c=c||document;for(var d,e,f=a.split(" "),g=[],h="*"===b&&c.all?c.all:c.getElementsByTagName(b),i=[],j=0,k=f.length;k>j;j+=1)g.push(new RegExp("(^|\\s)"+f[j]+"(\\s|$)"));for(var l=0,m=h.length;m>l;l+=1){d=h[l],e=!1;for(var n=0,o=g.length;o>n&&(e=g[n].test(d.className));n+=1);e&&i.push(d)}return i})(a,b,c)};getMagnifyLightboxBrowserInfo=function(){checkMagnifyLightbox("konqueror")?(magnifyLightboxBrowser="Konqueror",magnifyLightboxOS="Linux"):checkMagnifyLightbox("safari")?magnifyLightboxBrowser="Safari":checkMagnifyLightbox("omniweb")?magnifyLightboxBrowser="OmniWeb":checkMagnifyLightbox("opera")?magnifyLightboxBrowser="Opera":checkMagnifyLightbox("webtv")?magnifyLightboxBrowser="WebTV":checkMagnifyLightbox("icab")?magnifyLightboxBrowser="iCab":checkMagnifyLightbox("msie")?magnifyLightboxBrowser="Internet Explorer":checkMagnifyLightbox("compatible")?magnifyLightboxBrowser="An unknown browser":(magnifyLightboxBrowser="Netscape Navigator",magnifyLightboxBrowserVersion=magnifyLightboxDetect.charAt(8)),magnifyLightboxBrowserVersion||(magnifyLightboxBrowserVersion=magnifyLightboxDetect.charAt(place+magnifyfLightboxString.length)),magnifyLightboxOS||(magnifyLightboxOS=checkMagnifyLightbox("linux")?"Linux":checkMagnifyLightbox("x11")?"Unix":checkMagnifyLightbox("mac")?"Mac":checkMagnifyLightbox("win")?"Windows":"an unknown operating system"),logDebug("got browser info, going to get magnify variables"),getMagnifyVariables(),window.domScanned||(window.addEventListener?window.addEventListener("load",function(){scanForLinks()},!1):window.attachEvent&&window.attachEvent("onload",function(){scanForLinks()}))},scanForLinks=function(){if(!window.domScanned){window.magnifyLightboxLinks=getElementsByClassName("magnify-lightbox","a"),window.domScanned=!0;for(var a=0;a<window.magnifyLightboxLinks.length;a++){var b=window.magnifyLightboxLinks[a];createLinkPlayer(b)}}},createLinkPlayer=function(a){try{magnifyLightboxWindow=window.top;var b=new magnifyPlayer,c=document.createElement("a");c.href=a.href;for(var d=new Array,e=c.search?c.search.slice(1,c.search.length):"",f=e?e.split("&"):new Array,g=!1,h=0;h<f.length;h++){var i=f[h].split("=");"init_autoplay"==d[0]&&(g=!0),d.push(i[0],i[1])}g||d.push("init_autoplay","1");var j=d.join("/");if(logDebug(j),b.hostname=c.hostname,b.pathname=c.pathname,b.pathname.match(/^\//)||(b.pathname="/"+b.pathname),b.channel="5TKQP712FQK6LLQ4",b.url="http://"+b.hostname+b.pathname+"/player/svp/layout/lightbox/"+j,logDebug("player url: "+b.url),b.count=magnifyPlayers.length,logDebug("adding player "+b.count+" "+a.href),b.url+="/player_count/"+b.count,b.info=b.createPlayer(),magnifyPlayers.push(b),!document.getElementById("magnify_lightbox_overlay")){var k=magnifyLightboxWindow.document.getElementsByTagName("body")[0],l=k.childNodes,m=magnifyLightboxWindow.document.createElement("div");m.id="magnify_lightbox_overlay",m.style.display="none",m.style.top="0px",m.style.left="0px",m.style.width="100%",m.style.height="100%",m.style.zIndex=5e3,m.style.textAlign="center",m.style.position="Internet Explorer"==magnifyLightboxBrowser?"absolute":"fixed",m.style.backgroundImage="url('http://decor.waywire.com/decor/live/lightbox.png')",l.length>0?k.insertBefore(m,l[0]):k.appendChild(m)}magnifyLightboxes.push(new magnifyLightbox),a.addEventListener?(a.addEventListener("click",function(a){return populateMagnifyLightbox(a,b.count)},!1),logDebug("adding overlay event listener")):a.attachEvent?(logDebug("attaching overlay event"),a.attachEvent("onclick",function(a){return populateMagnifyLightbox(a,b.count)})):(logDebug("falling through to default overlay onclick"),a.onclick=function(a){return populateMagnifyLightbox(a,b.count)}),window.addEventListener?window.addEventListener("message",receiveMessage,!1):window.attachEvent&&window.attachEvent("onmessage",receiveMessage)}catch(n){logDebug("Could not create lightbox link: "+n.message)}},checkMagnifyLightbox=function(a){return place=magnifyLightboxDetect.indexOf(a)+1,magnifyfLightboxString=a,place},getMagnifyVariables=function(){},mvpInjectScript=function(a,b,c,d){var e=document.getElementsByTagName("head")[0],f=document.getElementById(b);if(f&&e.removeChild(f),f=null,f&&a==f.src)d();else{var g=document.createElement("script");g.setAttribute("src",a),g.setAttribute("id",b),d&&mvpWaitForLoad(c,d),e.appendChild(g)}},mvpWaitForLoad=function(lookFor,callback){var interval=setInterval(function(){"undefined"!=eval("typeof "+lookFor)&&(clearInterval(interval),callback())},50)},magnifyLightbox.prototype={yPos:0,xPos:0,activate:function(){"Internet Explorer"==magnifyLightboxBrowser&&(this.getScroll(),this.prepareIE("100%","hidden"),this.setScroll(0,0)),this.hideSelects("hidden"),this.displayLightbox("block")},prepareIE:function(a,b){bod=document.getElementsByTagName("body")[0],bod.style.height=a,bod.style.overflow=b,htm=document.getElementsByTagName("html")[0],htm.style.height=a,htm.style.overflow=b},hideSelects:function(a){var b=document.getElementsByTagName("select");for(i=0;i<b.length;i++)b[i].style.visibility=a;var c=document.getElementsByTagName("object");for(i=0;i<c.length;i++)c[i].style.visibility=a;var d=document.getElementsByTagName("embed");for(i=0;i<d.length;i++)d[i].style.visibility=a},makeOpaque:function(a){var b=document.getElementsByTagName("head")[0],c=document.getElementById("removeOpacity");if(a){var d=document.createElement("style");d.id="removeOpacity";var e="html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {opacity:1.0; filter:alpha(opacity=100)}";if(d.setAttribute("type","text/css"),d.styleSheet)d.styleSheet.cssText=e;else{var f=document.createTextNode(e);d.appendChild(f)}b.appendChild(d)}else c&&b.removeChild(c)},getScroll:function(){self.pageYOffset?this.yPos=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?this.yPos=document.documentElement.scrollTop:document.body&&(this.yPos=document.body.scrollTop)},setScroll:function(a,b){window.scrollTo(a,b)},displayLightbox:function(a){document.getElementById("magnify_lightbox_overlay").style.display=a},deactivate:function(){var a=document.getElementById("magnify_lightbox_overlay"),b=document.getElementById("magnify_lightbox_content");return b&&a.removeChild(b),a.innerHTML="","Internet Explorer"==magnifyLightboxBrowser&&(this.prepareIE("auto","auto"),this.setScroll(0,this.yPos)),this.hideSelects("visible"),this.makeOpaque(!1),this.displayLightbox("none"),!1}},populateMagnifyLightbox=function(a,b){try{var c=magnifyPlayers[b],d=magnifyLightboxes[b],e=c.info,f=document.getElementById("magnify_lightbox_overlay");f.appendChild(e),f.onclick=function(){d.deactivate()};var g=document.getElementById("magnify_lightbox_close_"+b);g.onclick=function(){return d.deactivate()},d.activate(),stopEvent(a)}catch(a){logDebug("can't spawn lightbox: "+a.message)}},stopEvent=function(a){if(!a)var a=window.event;return a.cancelBubble=!0,a.returnValue=!1,a.stopPropagation&&(a.stopPropagation(),a.preventDefault()),!1},receiveMessage=function(a){var b=a.data.split(":"),c=b[0],d=b[1],e=magnifyPlayers[c];if(c&&d&&e){logDebug("Received message: count: "+c+" data: "+d+" player: "+e);var f=magnifyLightboxScripts[magnifyLightboxScripts.length-1],g=document.createElement("a");g.href=f.src;var h=e.hostname||g.hostname;a.origin==="http://"+h&&d.match("resize")&&(logDebug("resizing player"),resizeOverlay(d.split(" ")[1]))}},resizeOverlay=function(a){try{var b=a.split("x"),c=document.getElementById("magnify_lightbox_content"),d=[parseInt(c.style.width),parseInt(c.style.height)];logDebug("current player height: "+d[0]+" current player width: "+d[1]),c.style.width=b[0]+"px",c.style.height=b[1]+"px",c=document.getElementById("magnify_player_iframe_container"),c.style.width=b[0]+"px",c.style.height=b[1]+"px",logDebug("new player height: "+c.style.height+" new player width: "+c.style.width)}catch(e){logDebug("Error in resize overlay: "+e.message)}},magnifyPlayer.prototype={addMagnifyLightboxMarkup:function(){if(!this.cid||!this.img||!this.channel)return void logDebug("cid: "+cid+" img: "+img+" channel: "+channel);logDebug("adding markup");try{var a=magnifyLightboxWindow.document.getElementsByTagName("body")[0],b=a.childNodes;if(!document.getElementById("magnify_lightbox_overlay")){var c=magnifyLightboxWindow.document.createElement("div");c.id="magnify_lightbox_overlay",c.style.display="none",c.style.top="0px",c.style.left="0px",c.style.width="100%",c.style.height="100%",c.style.zIndex=5e3,c.style.textAlign="center",c.style.position="Internet Explorer"==magnifyLightboxBrowser?"absolute":"fixed",c.style.backgroundImage="url('http://decor.waywire.com/decor/live/lightbox.png')",b.length>0?a.insertBefore(c,b[0]):a.appendChild(c)}this.count=magnifyPlayers.length,this.url+="/player_count/"+this.count,this.info=this.createPlayer(),magnifyPlayers.push(this),magnifyLightboxes.push(new magnifyLightbox),logDebug("about to build lightbox"),this.buildMagnifyLightbox()}catch(d){logDebug(d.message)}},createPlayer:function(){var a=parseInt(f_clientWidth()),b=parseInt(f_clientHeight()),c=this.getPlayerWidth(a),d=Math.floor(.5625*c)+200,e=Math.floor((b-d)/2)>0?Math.floor((b-d)/2):10,f=document.createElement("style"),g="";if(f.setAttribute("type","text/css"),f.styleSheet)f.styleSheet.cssText=g;else{var h=document.createTextNode(g);f.appendChild(h)}var i=document.createElement("div");i.className="magnify-player-lightbox-content",i.id="magnify_lightbox_content",i.style.position="relative",i.style.width=c+"px",i.style.height=d+"px",i.style.marginTop=e+"px",i.style.marginLeft="auto",i.style.marginRight="auto",i.style.textAlign="left";var j=document.createElement("div");j.className="magnify-player-close clearfix",j.style.textAlign="right",j.style.position="absolute",j.style.width="100%",j.style.zIndex=2;var k=document.createElement("a");k.href="#",k.className="magnify-player-close-link",k.id="magnify_lightbox_close_"+this.count,k.style.position="relative";var l=document.createElement("img");l.src="http://www.waywire.com/decor/live/lightbox_close.png",l.border="0",l.style.position="relative",l.style.top="-15px",l.style.right="-15px";var m=document.createElement("div");m.style.position="relative",m.style.height=d+"px",m.style.width=c+"px",m.id="magnify_player_iframe_container";var n=document.createElement("iframe");return n.id="magnify_lightbox_frame_"+this.count,n.src=this.url,n.style.width="100%",n.style.height="100%",n.frameBorder="0",n.marginHeight="0",n.marginWidth="0",n.scrolling="no",n.setAttribute("allowTransparency",!0),k.appendChild(l),j.appendChild(k),m.appendChild(n),i.appendChild(f),i.appendChild(j),i.appendChild(m),i},insertMagnifyLightboxCSS:function(a){var b=document.createElement("style"),c=a;if(b.setAttribute("type","text/css"),b.styleSheet)b.styleSheet.cssText=c;else{var d=document.createTextNode(c);b.appendChild(d)}var e=document.getElementsByTagName("head")[0];e.appendChild(b)},getPlayerWidth:function(a){return 750>a?600:736},buildMagnifyLightbox:function(){return logDebug("starting to build lightbox"),this.cid&&this.img&&this.channel?void this.buildMagnifyBug():(logDebug("missing something, aborting"),void logDebug("cid: "+cid+" img: "+img+" channel: "+channel))},buildMagnifyBug:function(){logDebug("building magnify bug");try{var a=this,b=document.createElement("div");if(b.id="magnify_lightbox_player_overlay_container_"+this.count,b.className="magnify-lightbox-overlay-container",this.showOverlay){var c=document.createElement("div");c.id="magnify_lightbox_player_overlay_"+this.count,c.className="magnify-lightbox-overlay",c.style.backgroundImage="url(http://static.media.magnify.net.s3.amazonaws.com/img/player_overlay.png)",c.style.backgroundPosition="center center",c.style.backgroundRepeat="no-repeat",c.style.cursor="pointer",c.style.cursor="hand",c.style.position="absolute",c.style.left="0px",c.style.width=this.imgWidth+"px",c.style.height=this.imgHeight+"px";var d=document.createElement("img");d.src="http://decor.waywire.com/decor/live/transparent.gif",d.width=this.imgWidth,d.height=this.imgHeight,c.appendChild(d),b.appendChild(c),c.addEventListener?(c.addEventListener("click",function(b){return populateMagnifyLightbox(b,a.count)},!1),logDebug("adding overlay event listener")):c.attachEvent?(logDebug("attaching overlay event"),c.attachEvent("onclick",function(b){return populateMagnifyLightbox(b,a.count)})):(logDebug("falling through to default overlay onclick"),c.onclick=function(b){return populateMagnifyLightbox(b,a.count)})}var e=document.createElement("div");e.id="magnify_lightbox_player_thumbnail_container_"+this.count,e.className="magnify-lightbox-thumbnail-container",e.style.cursor="pointer",e.style.cursor="hand";
var f=document.createElement("img");if(f.className="magnify-lightbox-thumbnail",f.src=this.img,f.width=this.imgWidth,f.height=this.imgHeight,e.appendChild(f),b.appendChild(e),this.showOverlay||(e.addEventListener?(logDebug("adding thumbnail event listener"),e.addEventListener("click",function(b){return populateMagnifyLightbox(b,a.count)},!1)):e.attachEvent?(logDebug("attaching thumbnail event"),e.attachEvent("onclick",function(b){return populateMagnifyLightbox(b,a.count)})):(logDebug("falling through to default onclick"),e.onclick=function(b){return populateMagnifyLightbox(b,a.count)})),logDebug("events come after DOM attachment"),this.title){var g=document.createElement("div");g.className="magnify-lightbox-player-title",g.innerHTML=this.title,b.appendChild(g)}if(this.description){var h=document.createElement("div");h.className="magnify-lightbox-player-description",h.innerHTML=this.description,b.appendChild(h)}var i=document.createElement("div");i.id="magnify_lightbox_player_"+this.count,i.className="magnify-lightbox-player",i.style.position="relative",i.appendChild(b),this.bug=i,this.insertMagnifyLightbox()}catch(j){logDebug(j.message)}},insertMagnifyLightbox:function(){logDebug("inserting bug before "+this.script.src),this.script.parentNode.insertBefore(this.bug,this.script)}},getMagnifyLightboxBrowserInfo();